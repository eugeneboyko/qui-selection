define(function(){function c(a,b){this.__selectionLimit=a||Number.POSITIVE_INFINITY;this.__allItems=b||[];this.__selectedItems=[]}c.prototype={allocate:function(a){return this.deselect(this.firstSelected())},select:function(a){if(1>this.__selectionLimit||-1!==this.__selectedItems.indexOf(a)||this.__selectedItems.length>=this.__selectionLimit&&!this.allocate(a))return!1;this.__selectedItems.push(a);this.callback&&this.callback(a,!0);return!0},deselect:function(a){var b=this.__selectedItems.indexOf(a);
if(-1===b)return!1;this.__selectedItems.splice(b,1);this.callback&&this.callback(a,!1);return!0},isSelected:function(a){return-1!==this.__selectedItems.indexOf(a)},toggle:function(a){this.isSelected(a)?this.deselect(a):this.select(a)},selectItems:function(a){for(var b=0;b<a.length;b++)this.select(a[b])},deselectItems:function(a){for(var b=0;b<a.length;b++)this.deselect(a[b])},toggleItems:function(a){for(var b=0;b<a.length;b++)this.toggle(item)},isAllItemsSelected:function(a){for(var b=0;b<a.length;b++)if(!this.isSelected(a[b]))return!1;
return!0},isAnyItemSelected:function(a){for(var b=0;b<a.length;b++)if(this.isSelected(a[b]))return!0;return!1},selectAll:function(){this.selectItems(this.allItems)},deselectAll:function(){this.deselectItems(this.allItems)},toggleAll:function(){this.isAllSelected()?this.deselectAll():this.selectAll()},isAllSelected:function(){return this.__selectedItems.length===this.__allItems.length},isAnySelected:function(){return 0<this.__selectedItems.length},firstSelected:function(){return this.__selectedItems[0]}};
Object.defineProperty(c.prototype,"selectedItems",{get:function(){return this.__selectedItems},set:function(a){var b=[],c=[],d;d=0;for(item=this.__selectedItems[d];d<this.__selectedItems.length;d++)-1===a.indexOf(item)?b.push(item):c.push(item);this.deselectItems(b);this.selectedItems(c)}});Object.defineProperty(c.prototype,"allItems",{get:function(){return this.__allItems},set:function(a){this.deselectAll();this.__allItems=a}});Object.defineProperty(c.prototype,"selectionLimit",{get:function(){return this.__selectionLimit},
set:function(a){this.deselectAll();this.__selectionLimit=a}});return c});
